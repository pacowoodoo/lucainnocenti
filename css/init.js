/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */

/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */

/*! Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */

define("libs/dyb/analytics-tracker",[],function(){return{trackEvent:function(t,e,i){window._gaq.push(["dyb._trackEvent",t,e,i])},trackTransaction:function(t,e,i){var n=t.amount-t.discountAmount,a=n*(t.taxRate/100);window._gaq.push(["dyb._set","currencyCode",i]),window._gaq.push(["dyb._addTrans",t.id,"",n-a,a,"0","","",t.locale]);for(var o in e){var r=e[o],c=r.price-r.discountAmount-r.price*(t.taxRate/100);window._gaq.push(["dyb._addItem",r.id,"PREMIUM_"+t.locale.toUpperCase()+"_"+r.product.duration+r.product.durationUnit,"Premium "+r.product.duration+r.product.durationUnit+" - "+t.locale.toUpperCase(),"Premium",c,1])}window._gaq.push(["dyb._trackTrans"])},trackUserEvent:function(t,e){this.trackEvent("user",t,e)},trackCvVisitorEvent:function(t,e){this.trackEvent("cv-visitor",t,e)},trackPromoEvent:function(t,e){this.trackEvent("promo",t,e)},trackTipsEvent:function(t,e){this.trackEvent("tips",t,e)},addVar:function(t,e,i,n){window._gaq.push(["dyb._setCustomVar",t,e,i,n])}}}),define("libs/dyb/compiler",[],function(){return function(t,e){var i,n;for(i in t)t.hasOwnProperty(i)&&(n=e.find(i),n.length>0&&t[i](n))}}),function(t){"function"==typeof define&&define.amd?define("libs/dyb/calc",["jquery"],t):t(window.jQuery)}(function($){$.fn.dybCalc=function(){var $this=$(this),expression=$this.data("calc")||$this.data("dybCalc"),cssAttributes={},computeSize=null,hasBeenResized=!1,i=null,computeSelectorSize=function(t,e){var i,n=0;switch(t){case"parent":i=$this.parent();break;case"self":i=$this;break;case"window":i=$(window);break;default:i=-1!==t.indexOf("#")?$(t):-1!==t.indexOf("~")?$this.closest(t):$this.parent().find(t)}return i.each(function(t,i){n+="h"===e?$(i).outerHeight():$(i).outerWidth()}),n},generateExp=function(t){return t.replace(/\(([^)]+)\)/g,"__$1__").replace("window","__window__").replace("self","__self__").replace("%"," * 0.01 * __parent__").replace("px","")};if("string"==typeof expression)throw"the data-calc attribute is not a valid JSON : "+expression;for(i in expression)expression.hasOwnProperty(i)&&(cssAttributes[i]=generateExp(expression[i]));return computeSize=function(){var expr,cssAtt="",att,modifier,selectorComputeFn=function(t,e){return computeSelectorSize(e,modifier)};for(att in cssAttributes){var modifierExp=att.match(/\/(.)/);modifier=modifierExp?modifierExp[1]:null,modifier||(modifier=-1!==att.indexOf("eight")||-1!==att.indexOf("top")?"h":"w"),expr=cssAttributes[att].replace(/__([^_]+)__/g,selectorComputeFn),cssAtt=att.replace(/\/./,"").replace(/([A-Z])/g,"-$1").toLowerCase(),$this.css(cssAtt,eval(expr))}hasBeenResized=!0},$(document).on("globalLayoutModified",function(){hasBeenResized&&computeSize()}),{resize:computeSize}}}),window.matchMedia=window.matchMedia||function(t){var e,i=t.documentElement,n=i.firstElementChild||i.firstChild,a=t.createElement("body"),o=t.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(o),function(t){return o.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(a,n),e=42==o.offsetWidth,i.removeChild(a),{matches:e,media:t}}}(document),function(t){function e(){g(!0)}if(t.respond={},respond.update=function(){},respond.mediaQueriesSupported=t.matchMedia&&t.matchMedia("only all").matches,!respond.mediaQueriesSupported){var i,n,a,o=t.document,r=o.documentElement,c=[],s=[],d=[],u={},l=30,p=o.getElementsByTagName("head")[0]||r,f=o.getElementsByTagName("base")[0],m=p.getElementsByTagName("link"),h=[],b=function(){for(var e,i,n,a,o=m,r=o.length,c=0;r>c;c++)e=o[c],i=e.href,n=e.media,a=e.rel&&"stylesheet"===e.rel.toLowerCase(),i&&a&&!u[i]&&(e.styleSheet&&e.styleSheet.rawCssText?(v(e.styleSheet.rawCssText,i,n),u[i]=!0):(!/^([a-zA-Z:]*\/\/)/.test(i)&&!f||i.replace(RegExp.$1,"").split("/")[0]===t.location.host)&&h.push({href:i,media:n}));y()},y=function(){if(h.length){var t=h.shift();k(t.href,function(e){v(e,t.href,t.media),u[t.href]=!0,setTimeout(function(){y()},0)})}},v=function(t,e,i){var n,a,o,r,d,u=t.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),l=u&&u.length||0,e=e.substring(0,e.lastIndexOf("/")),p=function(t){return t.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+e+"$2$3")},f=!l&&i,m=0;for(e.length&&(e+="/"),f&&(l=1);l>m;m++)for(n=0,f?(a=i,s.push(p(t))):(a=u[m].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,s.push(RegExp.$2&&p(RegExp.$2))),r=a.split(","),d=r.length;d>n;n++)o=r[n],c.push({media:o.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:s.length-1,hasquery:o.indexOf("(")>-1,minw:o.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:o.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")});g()},w=function(){var t,e=o.createElement("div"),i=o.body,n=!1;return e.style.cssText="position:absolute;font-size:1em;width:1em",i||(i=n=o.createElement("body"),i.style.background="none"),i.appendChild(e),r.insertBefore(i,r.firstChild),t=e.offsetWidth,n?r.removeChild(i):i.removeChild(e),t=a=parseFloat(t)},g=function(t){var e="clientWidth",u=r[e],f="CSS1Compat"===o.compatMode&&u||o.body[e]||u,h={},b=m[m.length-1],y=(new Date).getTime();if(t&&i&&l>y-i)return clearTimeout(n),void(n=setTimeout(g,l));i=y;for(var v in c){var k=c[v],x=k.minw,E=k.maxw,_=null===x,T=null===E,C="em";x&&(x=parseFloat(x)*(x.indexOf(C)>-1?a||w():1)),E&&(E=parseFloat(E)*(E.indexOf(C)>-1?a||w():1)),k.hasquery&&(_&&T||!(_||f>=x)||!(T||E>=f))||(h[k.media]||(h[k.media]=[]),h[k.media].push(s[k.rules]))}for(var v in d)d[v]&&d[v].parentNode===p&&p.removeChild(d[v]);for(var v in h){var $=o.createElement("style"),S=h[v].join("\n");$.type="text/css",$.media=v,p.insertBefore($,b.nextSibling),$.styleSheet?$.styleSheet.cssText=S:$.appendChild(o.createTextNode(S)),d.push($)}},k=function(t,e){var i=x();i&&(i.open("GET",t,!0),i.onreadystatechange=function(){4!=i.readyState||200!=i.status&&304!=i.status||e(i.responseText)},4!=i.readyState&&i.send(null))},x=function(){var t=!1;try{t=new XMLHttpRequest}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();b(),respond.update=b,t.addEventListener?t.addEventListener("resize",e,!1):t.attachEvent&&t.attachEvent("onresize",e)}}(this),define("libs/respond.min",function(){}),define("layout/init",["jquery","libs/dyb/analytics-tracker","libs/dyb/compiler","libs/dyb/calc","libs/respond.min"],function(t,e,i){var n={"[data-dyb-calc]":function(e){require(["libs/dyb/calc"],function(){e.each(function(e,i){t(i).dybCalc().resize()})})},"[data-dyb-track-click]":function(i){i.click(function(i){var n=t(this),a=n.data("dybTrackClick"),o=n.data("dybTrackClickVar"),r=n.attr("href");return a.category=a.category||"cv-visitor","string"==typeof a?window.console&&window.console.error("data for dyb-track is not a valid json. Tracking is canceled"):(o&&e.addVar(o.index,o.name,o.value,o.scope),e.trackEvent(a.category,a.action,a.label),void(r&&(i.preventDefault(),window.setTimeout(function(){window.location=r},500))))})},"[data-dyb-track-submit]":function(i){i.submit(function(){var i=t(this),n=i.data("dybTrackSubmit");return i.data("forceSubmit")?(i.data("forceSubmit",!1),!0):(e.trackCvVisitorEvent(n.action,n.label),window.setTimeout(function(){i.data("forceSubmit",!0),i.submit()},500),!1)})},"[data-dyb-track-transaction]":function(t){var i=t.data("dybTrackTransactionCurrency")||"EUR",n=t.data("dybTrackTransaction"),a=t.data("dybTrackTransactionProducts");e.trackTransaction(n,a,i)},"[data-dyb-track-promo]":function(i){i.each(function(i,n){var a=t(n),o=a.data("dybTrackPromo"),r="promo",c="view-"+o,s="click-"+o;o&&(!function d(){a.is(":visible")?e.trackEvent(r,"view",c):window.setTimeout(d,1e3)}(),a.on("mouseover",function(){require(["kissmetrics_loader"],function(t){t()})}),a.click(function(t){document.cookie="dyb_promo="+o+";path=/;domain="+location.host,require(["kissmetrics_loader"],function(t){var e=t();e.push(["record","Clicked Internal Ad",{"Internal Ad":s}])}),e.addVar(4,r,s,2),e.trackEvent(r,"click",s),a.attr("href")&&"_blank"!==a.attr("target")&&(t.preventDefault(),window.setTimeout(function(){window.location=a.attr("href")},500))}))})},"[data-popover]":function(e){require(["libs/bootstrap/bootstrap.min"],function(){e.popover(),t("body").on("click",function(i){e.each(function(){t(this).is(i.target)||0!==t(this).has(i.target).length||0!==t(".popover").has(i.target).length||t(this).popover("hide")})})})},"[data-mfp]":function(t){require(["libs/jquery/jquery.magnific-popup.min"],function(){t.magnificPopup()})},"[data-dyb-notification-bar]":function(t){require(["libs/dyb/notification"],function(){t.dybNotificationBar()})},"[data-tooltip]":function(t){require(["libs/bootstrap/bootstrap.min"],function(){t.tooltip()})}};return t(function(){i(n,t(document)),t(document).on("click","[data-dyb-popup]",function(){var e=t(this),i=e.data("dybPopup"),n=500,a=670,o=t(window).height()/2-n/2,r=t(window).width()/2-a/2;window.open(i,"share","top="+o+",left="+r+",toolbar=0,status=0,width="+a+",height="+n)})}),function(t){i(n,t)}});